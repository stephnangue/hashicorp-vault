[global_tags]
  role = "vault-server"
  cluster = "{{ cluster_name }}"
  datacenter = "{{ region }}"

[agent]
  interval = "10s"
  round_interval = true
  metric_batch_size = 1000
  metric_buffer_limit = 10000
  collection_jitter = "0s"
  flush_interval = "10s"
  flush_jitter = "0s"
  hostname = "{{ ansible_hostname }}"

[[outputs.influxdb_v2]]
  urls = ["{{ influxdb_url }}"]
  token = "{{ influxdb_token }}"
  organization = "openlab"
  bucket = "vault_infra"

[[inputs.statsd]]
  protocol = "udp"
  service_address = ":8125"
  metric_separator = "."
  datadog_extensions = true

[[inputs.cpu]]

[[inputs.disk]]

[[inputs.diskio]]

[[inputs.kernel]]

[[inputs.linux_sysctl_fs]]

[[inputs.mem]]

[[inputs.chrony]]

[[inputs.net]]
  interfaces = ["eth"]

[[inputs.netstat]]

[[inputs.procstat]]
  pattern = "(vault)"

[[inputs.processes]]

[[inputs.swap]]

[[inputs.system]]